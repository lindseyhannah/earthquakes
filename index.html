<!DOCTYPE html>
<html>
<head>
	<!-- the mapbox libraries -->
	
	<meta charset='utf-8' />
    <title>Earthquakes</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
    <link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
	<div id="map" style="width: 800px; height: 800px;" class="mapboxgl-map"></div> 
	</style>

</head>
<body>
	<div id='map'></div>
	<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoibG1oYW5uYWgiLCJhIjoiY2pvNHYzNnZ4MDBuNjNxcHUwZzR3dmR5bSJ9.c2ULzGUVCYiPhkvdiqTRZw';
		var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/lmhannah/cjoj9wpdv9cr32rmnje5hm7mj',
		});
		map.setCenter([-120, 60]);
		map.setZoom(3);

		map.on('load', function(){
			//Adds all earthquakes in the past week greater than 2.5 mag
			map.addSource('earthquakes', {
				"type": "geojson",
				"data": "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson"
			});
			map.addSource('plates', {
				"type": "geojson",
				"data": "plates.geojson"
			
			});
			
			map.addLayer({
				"id":"quakes",
				"type": "circle",
				"source": "earthquakes",
				//style the markers
				"paint": {
					"circle-color": "#FF0800",
					"circle-radius": {
						property: 'mag',
						type: 'exponential',
						stops: [
						[0.5, .5],
						[1, 1],
						[2, 1.5],
						[3, 2],
						[4, 2.5],
						[5, 3],
						[6, 3.5],
						[7, 4],
						[8, 4.5],
						[9, 5],
						[10, 6]
						]
						},			
						"circle-opacity": 0.5
					} 

			});
			map.addLayer({
							"id": "plates",
							"type": "fill",
							"source": "plates",
							"paint":{
								"fill-color": "#192A3D",
								"fill-opacity": .99,
								"fill-outline-color": "#192A3D"
							}

						});

			map.on('click', 'quakes', function (e) {
				var coordinates= e.features[0].geometry.coordinates.slice();
				var description= "<p>Magnitude: "+e.features[0].properties.mag+"<br>Location: "+e.features[0].properties.place+"<br> URL: <a href= '"+e.features[0].properties.url+"'> Click here for more information about this event </a> </p>"
			//popup only appears over feature being pointed to if map is zoomed out	
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
			
           //add popup to map
			new mapboxgl.Popup()
				.setLngLat(coordinates)
				.setHTML(description)
				.addTo(map);

		});
			//change cursor to pointer when hovering over element
			//code taken from Mapbox pop-up on click tutorial
			map.on('mouseenter', 'quakes', function() {
				map.getCanvas().style.cursor= 'pointer';
			});
			map.on('mouseleave', 'quakes', function() {
				map.getCanvas().style.cursor = '';
			});
		});


	</script>


	<!--Map 2-->

	
 
</body>
</html>


